---
templateKey: blog-post
title: Cloudflare WARP는 어떤 원리로 빠른 것일까?
date: 2020-05-16T02:30:00.017Z
description: 트위터 이미지 불러오기는 왜 느린 것이며, Cloudflare WARP를 쓰면 왜 빠른 것일까?
tags:
  - IT
  - 인터넷
---
![고속도로 사진](/images/highway.jpg)
<center>사진출처 : http://www.enewstoday.co.kr/news/articleView.html?idxno=1268969</center><br>

우리가 서울에서 부산까지 자가용으로 가는 길에는 다양한 방법이 존재한다. 경부고속도로로만 달리는 방법과 중간에 중부내륙고속도로와 중앙고속도로 등을 경유하는 방법 등 매우 다양할 것이다. 인터넷 역시 마찬가지이다.

![컴퓨터 네트워크](/images/network.png)

컴퓨터 6대가 서로 연결된 구조에서도 엄청나게 많은 경로가 탄생하고 누가 봐도 복잡해 보인다. 하물며 6대를 넘어 한 지역의, 한 도시의, 한 국가의 인터넷에는 얼마나 셀 수 없을 정도로 많은 경로가 존재하는지 이제 감이 오는가?

![Dijkstra 알고리즘](/images/dijkstra.gif)

흔히 내비게이션에 들어가는 알고리즘으로 잘 알려진 Dijkstra 알고리즘은 인터넷에서도 똑같이 쓰이게 되는데 이를 통해 거미줄처럼 얽혀있는 인터넷에서 가장 최단 경로로 갈 수 있게 해준다.

하지만 이것은 어디까지나 **상호접속료**와 같은 통행세, 그러니까 **금전적인 문제**가 안 얽혀있을 때만 가장 최단 경로로 갈 수 있게 해주는 것이다. 우리가 자가용으로 서울에서 부산을 갈 때 요금소에서 내야 하는 통행료를 생각하면 조금은 시간이 더 걸리더라도 요금이 저렴한 도로로 달리는 것과 동일한 맥락이다.

![요금소 사진](/images/tollgate.jpg)
<center>사진출처 : https://news.joins.com/article/21987262</center><br>

트위터의 이미지가 며칠째 느리게 불러와 지는데 이는 **비싸더라도 빠른 길** 대신 **적당한 요금을 지불하는 적당한 속도의 길**을 선택하도록 통신사 혹은 콘텐츠 제공회사인 트위터가 그렇게 경로를 설정했기에 그런 것이다. 그럼 Cloudflare WARP는 어떠한 이유에서 빠른 것일까?

![Cloudflare WARP 원리](/images/warp.png)
우선 Cloudflare WARP의 원리에 대해 알아보면 Cloudflare 데이터센터와 기기 간 VPN으로 구성하여 인터넷을 이용할 수 있도록 하는데 그 중에서도 핵심은
  1. 가장 가까운 곳에 있는 Cloudflare 데이터센터로 접속한다.
  2. 접속된 Cloudflare 데이터센터에서 가까운 목적지로 빠르게 접속할 수 있게 해준다.

놀랍게도 이게 끝이다. Cloudflare는 빠른 길을 저렴하게 이용할 수 있게 많은 인터넷 교환소(IX) 그리고 통신사와 협력하고 있기에 **비싸더라도 빠른 길**에 대한 부담이 상대적으로 적은 편이다. 트위터 이미지가 저장된 곳으로 **비싸더라도 빠른 길**로 우리를 달릴 수 있게 해주기에 당연히 Cloudflare WARP를 쓰면 빠를 수밖에 없다.

![Cloudflare WARP+ 원리](/images/warpplus.png)
Cloudflare WARP의 유료버전인 WARP+의 경우 접속된 Cloudflare 데이터센터에서 Cloudflare Argo Smart Routing을 이용해 목적지까지의 **홉(Hop, 경유지)**을 최적화하여 최단 경로로 만들어 목적지에 접속할 수 있게 해준다. **비싸더라도 빠른 길**로 우리를 달릴 수 있게 해 주는 거로 모자라서 **중간 경유지**까지 획기적으로 줄여주니 훨씬 빠를 수밖에 없다.

불과 몇 년 전까진 요금소에서 내는 통행료와 같은 상호접속료가 무정산 혹은 자율적으로 이루어지면서 나름 쾌적한 인터넷 환경을 제공하였는데 법률 개정을 통해 그런 것이 모두 없어졌고 결국 통신사들도 그리고 콘텐츠 제공회사들도 서로의 손해를 줄이기 위해 **느리더라도 저렴한 길** 혹은 **적당한 속도에 적당한 요금을 지불하는 길**로 우리를 안내하고 있다. 정말 슬픈 일이 아닐 수가 없다. 이러한 상황 속에서 Cloudflare WARP는 분명히 우리를 도와줄 도구인 것은 틀림없긴 하다.

어디까지나 이 글은 컴퓨터를 잘 모르는 평범한 사람들이 읽을 수 있도록 최대한 쉽게 풀어 설명한 글이라 전문가가 보기엔 조금 어색한 부분이 있을지도 모른다. 물론 전문적인 기술용어로 설명할 수도 있지만 그렇게 하면 아무도 안 읽을 게 분명하다. Cloudflare WARP의 기술적인 부분이 좀 더 궁금하다면 [이 글](https://blog.cloudflare.com/warp-technical-challenges/)을 직접 읽어보는 것을 추천한다.